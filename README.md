# Маркировка KZ

Приложение для обеспечение выполнения целевых функций АС СУЗ-Облако 3.1, включая:
Осуществление заказов на эмиссию кодов маркировки.
Предоставление эмитированных кодов маркировки для нанесения на продукцию.
Верификацию нанесения КМ.
Агрегацию готовой, упакованной продукции с нанесёнными средствами идентификации (СИ).

## Функциональность

- Управление заказами, включая создание заказов на эмиссию кодов маркировки
- Поддержка различных отраслевых API-расширений (фармацевтика, обувь, табак и др.)
- Управление подключениями к API
- Работа с учетными данными и токенами безопасности
- Ведение номенклатуры товаров
- Система логирования API-запросов и ответов
- Индикатор доступности API
- Автоматическое сохранение данных при завершении работы
- Восстановление стандартных статусов заказов при запуске
- Расширенное логирование операций приложения

## Технические требования

- Python 3.8 или выше
- PyQt6
- SQLite (для хранения данных)
- Дополнительные библиотеки указаны в requirements.txt

## Установка

1. Клонировать репозиторий:
```bash
git clone https://github.com/ваш-логин/название-репозитория.git
cd название-репозитория
```

2. Создать и активировать виртуальное окружение:
```bash
python -m venv venv
# Для Windows:
venv\Scripts\activate
# Для Linux/Mac:
source venv/bin/activate
```

3. Установить зависимости:
```bash
pip install -r requirements.txt
```

4. Настроить конфиденциальные данные:
   - Создайте файл `credentials.json` или используйте интерфейс приложения для настройки подключений и учетных данных

5. Запустить приложение:
```bash
python main.py
```

## Настройка подключения к API

1. В приложении перейдите на вкладку "Подключения" и добавьте новое подключение:
   - Название подключения
   - URL API сервера

2. На вкладке "Учетные данные" добавьте credentials для подключения:
   - OMSID (уникальный идентификатор СУЗ)
   - Токен клиента (client token)

3. На вкладке "Категории продукции" выберите активное расширение API (фармацевтика, обувь и т.д.)

## Создание заказа на эмиссию кодов маркировки

1. На вкладке "Заказы" нажмите "Создать заказ на эмиссию КМ"
2. Введите необходимые данные для заказа:
   - GTIN товара
   - Количество кодов
   - Тип серийного номера (генерируемый оператором или собственный)
   - Для фармацевтики: дополнительные обязательные параметры

## Система логирования

Приложение использует встроенный модуль logging Python для отслеживания операций:
- Все действия приложения записываются в лог
- API-запросы и ответы сохраняются в базе данных
- При возникновении ошибок создаются подробные записи в логе
- Логи доступны для просмотра через интерфейс приложения

## Безопасность

- Конфиденциальные данные (OMSID, токен клиента) хранятся локально в базе данных
- Данные автоматически сохраняются при завершении работы
- Реализована защита от потери данных при аварийном завершении
- Файлы с конфиденциальными данными исключены из системы контроля версий

## Лицензия

[MIT](LICENSE)

## Примечание для разработчиков

При внесении изменений в код проекта и отправке их в репозиторий, убедитесь, что:
- Конфиденциальные данные не попадают в систему контроля версий
- Файл `.gitignore` настроен для исключения типичных файлов с чувствительной информацией
- Все изменения логируются через систему логирования
- При добавлении новых функций обеспечивается корректное сохранение данных 